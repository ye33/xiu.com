"use strict";!function(){var u,t,f;function n(){this.init.apply(this,arguments)}u={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},getEvent:function(e){return e||window.event},getTarget:function(e){return e.target||e.srcElement},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},t={byId:function(e){return"string"==typeof e?document.getElementById(e):e},byClass:function(e,t){for(var n=[],a=new RegExp("(^| )"+e+"( |$)"),s=this.byTagName("*",t),i=0;i<s.length;i++)a.test(s[i].className)&&n.push(s[i]);return n},byTagName:function(e,t){return(t||document).getElementsByTagName(e)}},f={hasClass:function(e,t){return-1<(" "+e.className+" ").indexOf(" "+t+" ")},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)"),"$1").replace(/\s{1,}/g," ")}},n.prototype={init:function(e){this.magWrap=t.byId(e),this.magMain=this.magWrap.children[0],this.mW=this.magMain.offsetWidth,this.mH=this.magMain.offsetHeight,this.magImg=this.magMain.getElementsByTagName("img")[0],this.mImgSrc=this.magImg.getAttribute("data-src"),this.specBox=t.byClass("spec-items",this.magWrap)[0],this.specUl=this.specBox.getElementsByTagName("ul")[0],this.specItem=this.specBox.getElementsByTagName("li"),this.specFn(),this.setEventFn().dragEvent()},setEleFn:function(){var e=this,t="",n=document.createDocumentFragment(),a=document.createDocumentFragment();e.magMain.children[1]||(e.oMD=document.createElement("div"),e.oMD.className="MagnifierDrag",e.oMD.style.cssText="width:"+e.mW/2+"px;height:"+e.mH/2+"px;",e.oMD.innerHTML="&nbsp;",e.oMP=document.createElement("div"),e.oMP.className="MagnifierPop",e.oMP.style.cssText="width:"+e.mW+"px;height:"+e.mH+"px;right:"+(-e.mW-10)+"px;",e.oMI=document.createElement("div"),e.oMI.className="MagnifierImg",e.oMI.style.cssText="width:"+2*e.mW+"px;height:"+2*e.mH+"px;",t='<img style="width:100%;height:100%;" src="'+e.mImgSrc+'">',e.oMI.innerHTML=t,e.oMP.appendChild(e.oMI),n.appendChild(e.oMD),a.appendChild(e.oMP),e.magMain.appendChild(n),e.magWrap.appendChild(a))},removeFn:function(e){var t=this;"IMG"!=u.getTarget(e).nodeName&&(t.magMain.removeChild(t.oMD),t.magWrap.removeChild(t.oMP))},setMousemoveFn:function(e){var t=this,n=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop;_x=e.clientX+n-(t.magWrap.getBoundingClientRect().left+n)-t.oMD.offsetWidth/2,_y=e.clientY+a-(t.magMain.getBoundingClientRect().top+a)-t.oMD.offsetHeight/2,_l=t.magMain.offsetWidth-t.oMD.offsetWidth,_t=t.magMain.offsetHeight-t.oMD.offsetHeight,_l2=-(t.oMI.offsetWidth-t.magMain.offsetWidth),_t2=-(t.oMI.offsetHeight-t.magMain.offsetHeight),_x<0?_x=0:_x>_l&&(_x=_l),_y<0?_y=0:_y>_t&&(_y=_t),t.oMD.style.left=_x+"px",t.oMD.style.top=_y+"px",_bigx=_x/_l,_bigy=_y/_t,t.oMI.style.left=_bigx*_l2+"px",t.oMI.style.top=_bigy*_t2+"px"},setEventFn:function(){var t=this;function e(e){switch(events=u.getEvent(e),e.type){case"mouseover":t.setEleFn();break;case"mousemove":t.oMD&&t.setMousemoveFn(e);break;case"mouseout":t.removeFn(e)}}return{dragEvent:function(){u.addHandler(t.magMain,"mouseover",e),u.addHandler(t.magMain,"mousemove",e),u.addHandler(t.magMain,"mouseout",e)}}},specFn:function(){var a,s,i,o=this,n=t.byClass("spe_leftBtn",o.magWrap)[0],r=t.byClass("spe_rightBtn",o.magWrap)[0],m=this.specUl.getElementsByTagName("li")[0].offsetWidth+5,l=o.specItem.length,c=0,g=null,d=null;u.addHandler(o.specUl,"mouseover",function(e){var t=u.getTarget(e),n=0;if("UL"!=t.nodeName){for("IMG"==t.nodeName&&(t=t.parentNode);n<l;n++)o.specItem[n].className="";t.className="on",a=t.getElementsByTagName("img")[0],s=a.getAttribute("data-lsrc"),i=a.getAttribute("data-maxSrc"),o.magImg.setAttribute("src",s),o.magImg.setAttribute("data-src",i),o.mImgSrc=o.magImg.getAttribute("data-src")}}),4<l&&(f.addClass(r,"on"),u.addHandler(o.magWrap,"click",function(e){var t=u.getTarget(e);if(-1<t.className.indexOf("spe_rightBtn")){if(d=++c,l-5<d&&f.removeClass(t,"on"),l-4<d)return c=l-4,!1;o.buttur(o.specUl,{left:-d*m}),f.addClass(n,"on")}if(-1<t.className.indexOf("spe_leftBtn")){if((g=--c)<1&&f.removeClass(t,"on"),g<0)return c=0,!1;o.buttur(o.specUl,{left:-g*m}),f.addClass(r,"on")}}))},buttur:function(e,t){window.clearTimeout(e.timer);var n=this,a=null;for(direc in t){var s=direc.toLowerCase(),i="offset"+s.substr(0,1).toUpperCase()+s.substring(1).toLowerCase(),o=(t[direc]-e[i])/8;o=0<=o?Math.ceil(o):Math.floor(o),e.style[s]=e[i]+o+"px",a+=o}a&&("function"==typeof fnCallback?fnCallback.call(e):e.timer=window.setTimeout(function(){n.buttur(e,t)},20))}},window.MagnifierF=function(e){return new n(e)}}();